<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="StoreDAO">
	<select id="getStoreList">
		SELECT * FROM STORE WHERE 1 = 1
		AND SNAME LIKE CONCAT('%',#{searchKeyword},'%')
		OR ADDRESS LIKE CONCAT('%',#{searchKeyword},'%')
	</select>
	
	<select id="getStoreInfo" resultType="store">
	<![CDATA[
		SELECT * FROM STORE WHERE SNAME=#{sname}
		]]>
	</select>
	
	<select id="getLogin" resultType="store">
		<![CDATA[
			SELECT * FROM STORE WHERE SNAME=#{sname} AND PASSWORD=#{password}
		]]>
	</select>
	
	<insert id="insertStoreInfo" parameterType="store">
		<![CDATA[
			INSERT INTO STORE(SNAME,PASSWORD,SPACES,STOREDESC) 
			VALUES(#{sname},#{password},#{spaces},#{storeDesc})
		]]>
	</insert>
	
	  <insert id="insertMenu" >
		<![CDATA[
			INSERT INTO MENU(SNAME,MENU,MENUINFO,MENUPRICE) 
			VALUES(#{sname},#{foodname},#{foodInfo},#{foodprice})
		]]>
	</insert>  
	<select id="getStoreMenu" resultType="java.util.list">
		<![CDATA[
			SELECT * FROM MENU WHERE SNAME = #{sname}
		]]>
	</select>
</mapper>

